!function(a,b){"use strict";function c(a){var b=f.createElement("div");return a&&b.setAttribute("class",a),b}function d(){var a=c("pop"),b=c("pop-dialog"),d=c("pop-content"),e=c("pop-header"),g=c("pop-body"),h=c("pop-footer"),i=c("primary"),j=c();return i.textContent=this.confirmText,i.dataset.action="confirm",j.textContent=this.cancelText,j.dataset.action="cancel","alert"!==this.type&&h.appendChild(j),h.appendChild(i),d.appendChild(e),d.appendChild(g),d.appendChild(h),b.appendChild(d),a.appendChild(b),f.body.appendChild(a),a}function e(a){return this instanceof e?(a&&this.init(a),this):void 0}var f=a.document,g={type:"confirm",confirmText:"确定",cancelText:"取消"};e.prototype={init:function(a){for(var b in g)this[b]=g[b];return this.configure(a),this.context=this.context||d.call(this),this.initEvents(),this},show:function(){var a,b,c,d;this.context&&(arguments[1]&&"string"==typeof arguments[1]?(a=arguments[0],b=arguments[1],c=arguments[2],d=arguments[3]):(b=arguments[0],c=arguments[1],d=arguments[2]),this.context.querySelector(".pop-header").innerHTML=a||"",this.context.querySelector(".pop-body").innerHTML=b||"",c&&"function"==typeof c&&(this.confirmHandler=c),d&&"function"==typeof d&&(this.cancelHandler=d),f.documentElement.setAttribute("class","pop-show"),f.body.setAttribute("class","pop-show"),this.context.style.display="block")},hide:function(a){var b=this;this.context.style.display="none",this.confirmHandler&&setTimeout(function(){b.confirmHandler=null},500),this.cancelHandler&&setTimeout(function(){b.cancelHandler=null},500),a&&a.stopPropagation&&a.stopPropagation(),a&&a.preventDefault&&a.preventDefault(),f.documentElement.setAttribute("class",""),f.body.setAttribute("class","")},initEvents:function(){this.confirmHandler=this.cancelHandler=null,this.hideHandler=this.hideHandler||this.hide.bind(this),this.dialogEventProxyHandler=this.dialogEventProxyHandler||this.dialogEventProxy.bind(this),this.context.addEventListener("click",this.dialogEventProxyHandler,!1)},removeEvents:function(){this.context.removeEventListener("click",this.dialogEventProxyHandler,!1),this.hideHandler=this.confirmHandler=this.cancelHandler=null},reset:function(){this.removeEvents(),this.hide()},dialogEventProxy:function(a){var b=a.target;switch(b.dataset.action){case"cancel":this.hide(a),this.cancelHandler&&this.cancelHandler.call(b);break;case"confirm":this.hide(a),this.confirmHandler&&this.confirmHandler.call(b)}},configure:function(a){if(a&&"object"==typeof a&&a instanceof Object)for(var b in a)this[b]=a[b]}},a.addEventListener("DOMContentLoaded",function(){var a=(new e).init(),b=new e({type:"alert"});this.showConfirm=a.show.bind(a),this.hideConfirm=a.hide.bind(a),this.showAlert=b.show.bind(b),this.hideAlert=b.hide.bind(b),f.body.addEventListener("click",function(a){var b,c=a.target;if(c.dataset.toggle&&"pop"===c.dataset.toggle)f.querySelector(c.dataset.target).style.display="block";else if(c.dataset.action&&"close"===c.dataset.action)for(b=c;;){if(9===b.nodeType)break;if(b=b.parentNode,b.classList&&b.classList.contains("pop")){b.style.display="none";break}}},!1)},!1)}(window);